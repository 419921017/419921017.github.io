<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.1.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.1.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="AjaxAjax 是什么 Asynchronous [e’sɪŋkrənəs] Javascript And XML， AJAX 不是一门的新的语言，而是对现有技术的综合利用。 本质是在HTTP协议的基础上以异步的方式与服务器进行通信。 异步 : 某段程序执行时不会阻塞其他程序的执行, 表现形式是程序的执行顺序不依赖程序本身的书写顺序, 相反的情况依次执行, 那就是同步核心在于不会阻塞程序的执行,">
<meta property="og:type" content="article">
<meta property="og:title" content="Ajax详解">
<meta property="og:url" content="http://yoursite.com/2017/05/13/Ajax详解/index.html">
<meta property="og:site_name" content="Liu Yu&#39;s Blog">
<meta property="og:description" content="AjaxAjax 是什么 Asynchronous [e’sɪŋkrənəs] Javascript And XML， AJAX 不是一门的新的语言，而是对现有技术的综合利用。 本质是在HTTP协议的基础上以异步的方式与服务器进行通信。 异步 : 某段程序执行时不会阻塞其他程序的执行, 表现形式是程序的执行顺序不依赖程序本身的书写顺序, 相反的情况依次执行, 那就是同步核心在于不会阻塞程序的执行,">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-04-29T00:30:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ajax详解">
<meta name="twitter:description" content="AjaxAjax 是什么 Asynchronous [e’sɪŋkrənəs] Javascript And XML， AJAX 不是一门的新的语言，而是对现有技术的综合利用。 本质是在HTTP协议的基础上以异步的方式与服务器进行通信。 异步 : 某段程序执行时不会阻塞其他程序的执行, 表现形式是程序的执行顺序不依赖程序本身的书写顺序, 相反的情况依次执行, 那就是同步核心在于不会阻塞程序的执行,">






  <link rel="canonical" href="http://yoursite.com/2017/05/13/Ajax详解/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Ajax详解 | Liu Yu's Blog</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Liu Yu's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/13/Ajax详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liu Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu Yu's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Ajax详解
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-13T14:31:33+08:00">2017-05-13</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><h2 id="Ajax-是什么"><a href="#Ajax-是什么" class="headerlink" title="Ajax 是什么"></a>Ajax 是什么</h2><ol>
<li>Asynchronous [e’sɪŋkrənəs] Javascript And XML， AJAX 不是一门的新的语言，而是对现有技术的综合利用。 本质是在HTTP协议的基础上以异步的方式与服务器进行通信。</li>
<li>异步 : 某段程序执行时不会阻塞其他程序的执行, 表现形式是程序的执行顺序不依赖程序本身的书写顺序, 相反的情况依次执行, 那就是同步<strong>核心在于不会阻塞程序的执行, 从而提升整体执行效率</strong></li>
</ol>
<h1 id="原生-Ajax-的使用"><a href="#原生-Ajax-的使用" class="headerlink" title="原生 Ajax 的使用"></a>原生 Ajax 的使用</h1><h2 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h2><ul>
<li>XMLHttpRequest 是浏览器的内置对象, 作用是在后台与服务器通信( 交换数据 )</li>
<li>用于网页的局部更新, 而不是刷新整个页面</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 创建一个新的 XMLHttpRequest 对象</span><br><span class="line">var xhr = new XMLHttpRequest();</span><br></pre></td></tr></table></figure>
<h2 id="请求-Request"><a href="#请求-Request" class="headerlink" title="请求 Request"></a>请求 Request</h2><p>HTTP 请求由 3 个部分组成, 正好和 XMLHttpRequest 相对应</p>
<ol>
<li><p>请求行 open</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xhr.open( &apos;post&apos;, &apos;01.php&apos; );</span><br></pre></td></tr></table></figure>
</li>
<li><p>请求头 setRequestHeader</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// post 请求需要设置头</span><br><span class="line">xhr.setRequestHeader( &apos;Conent-Type&apos; , &apos;application/x-www-form-urlencoed&apos; );</span><br><span class="line">// get 请求可以不设置请求头</span><br></pre></td></tr></table></figure>
</li>
<li><p>请求主体 send</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhr.send( &apos;name=Jim&amp;age=18&apos; );</span><br><span class="line">// get 可以传空, 因为在头的时候已经传过数据了</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="响应-Response"><a href="#响应-Response" class="headerlink" title="响应 Response"></a>响应 Response</h2><ol>
<li>HTTP 响应是由服务端放出的, 客户端更应该关心度额是响应的结果</li>
<li>HTTP 响应由 3 个部分组成, 与 XMLHttpRequest 的方法或属性成对应关系</li>
<li>由于服务器做出响应需要时间( 网络延迟等原因 ),所以需要监听服务器响应状态, 再进行处理</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if( xhr.readyState == 4 &amp;&amp; xhr.status == 200 )&#123;</span><br><span class="line">    // 进行下一步操作, 如渲染页面</span><br><span class="line">    document.querySelector( &apos;#result&apos; ).innerHTML = xhr.responseText;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="步骤分析"><a href="#步骤分析" class="headerlink" title="步骤分析"></a>步骤分析</h2><ol start="0">
<li>请求未初始化 ( 还没有调用 open() )</li>
<li>请求已经建立, 但是还没有发送 ( 还没有调用send() )</li>
<li>请求已发送, 正在处理中 ( 通常现在可以从相应中获取内容头 )</li>
<li>请求在才处理中 , 通常响应中已经有部分数据可以用了, 但是服务器还没有完全完成响应</li>
<li>响应已经完成, 可以获取并使用服务器的响应了</li>
</ol>
<h1 id="其他注意点"><a href="#其他注意点" class="headerlink" title="其他注意点"></a>其他注意点</h1><ol>
<li>可以使用 onreadystatechange 来监听 XMLHttpRequest 的状态</li>
<li><p>获取行状态 ( 包括行状态码和状态信息 )</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhr.status  // 状态码</span><br><span class="line">xhr.statusText // 状态码信息</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取响应头</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhr.getResponseHeader( &apos;Content-Type&apos; );</span><br><span class="line">xhr.getAllResponseHeaders();</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取响应主体</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhr.responseText    // json, 文本 类型</span><br><span class="line">xhr.responseXML     // xml 类型</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="API-详解"><a href="#API-详解" class="headerlink" title="API 详解"></a>API 详解</h1><ol>
<li><code>xhr.open()</code> 发送请求, 可以是 get 或者 post 方式</li>
<li><code>xhr.setRequestHeader()</code> 设置请求头</li>
<li><code>xhr.send()</code> 发送请求主体, 如果是 get 方式使用 <code>xhr.send(null)</code>, 因为在 open 中已经发送了请求主体</li>
<li><code>xhr.onreadystatechange = functtion(){}</code> 监听响应状态</li>
<li><code>xhr.status</code> 表示响应码, 如 200 表示成功</li>
<li><code>xhr.statusText</code> 表示响应信息. 如 ok</li>
<li><code>xhr.getAllResponseHeaders()</code> 获取全部响应头信息</li>
<li><code>xhr.getResponseHeader( &#39;key&#39; )</code> 获取指定响应头信息</li>
<li><code>xhr.reponseText xhr.responseXML</code> 都表示响应主体, 格式不同</li>
</ol>
<h1 id="get-和-post-的差异"><a href="#get-和-post-的差异" class="headerlink" title="get 和 post 的差异"></a>get 和 post 的差异</h1><ol>
<li>get 没有请求主体, 使用 <code>xhr.send(null)</code> 发送请求主体</li>
<li>get 可以通过请求 url 上添加请求函数</li>
<li>post 可以通过 <code>xhr.send( &#39;name=itcast&amp;age=10&#39; )</code> 发送请求主体</li>
<li>post 需要设置</li>
<li>get 性能高( 基本上获取内容都是使用get )</li>
<li>get 大小限制约 4kb, post 则没有限制</li>
</ol>
<h2 id="get-方式的-请求响应"><a href="#get-方式的-请求响应" class="headerlink" title="get 方式的 请求响应"></a>get 方式的 请求响应</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var xhr = new XMLHttpRequest;</span><br><span class="line">    xhr.open(&apos;get&apos;,&apos;01.php&apos;);</span><br><span class="line">    xhr.send(null);</span><br><span class="line">    xhr.onreadystatechange = function()&#123;</span><br><span class="line">     if(xhr.status == 200 &amp;&amp; xhr.readyState == 4)&#123;</span><br><span class="line">         /*获取到XML格式内容  放回的是DOM对象  document*/</span><br><span class="line">         var xml = xhr.responseXML;</span><br><span class="line">         /*通过选着器可以获取到xml的数据*/</span><br><span class="line">         console.log(xml.querySelectorAll(&apos;array&apos;)[0].querySelector(&apos;src&apos;).innerHTML);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="post-请求和响应"><a href="#post-请求和响应" class="headerlink" title="post 请求和响应"></a>post 请求和响应</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//初始化</span><br><span class="line">var xhr = new XMLHttpRequest();</span><br><span class="line">//请求行</span><br><span class="line">xhr.open(&quot;post&quot;,&quot;03 AjaxPost.php&quot;);</span><br><span class="line">//请求头</span><br><span class="line">xhr.setRequestHeader(&quot;content-type&quot;,&quot;application/x-www-form-urlencoded&quot;)</span><br><span class="line">//请求内容</span><br><span class="line">xhr.send(&quot;username=rxt&amp;password=1234&quot;);</span><br><span class="line"></span><br><span class="line">//监听响应改变</span><br><span class="line">xhr.onreadystatechange = function()&#123;</span><br><span class="line"></span><br><span class="line">    /*什么时候才算是http通讯结束 在readyState=4的是 响应完成*/</span><br><span class="line">    /*什么是才算是通讯成  status 200 */</span><br><span class="line"></span><br><span class="line">    if(xhr.status ==200 &amp;&amp; xhr.readyState == 4)&#123;</span><br><span class="line">        document.querySelector(&quot;div&quot;).innerHTML = xhr.responseText;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h1><ol>
<li><p>XML 是可扩展标记语言（Extensible Markup Language）的缩写，其中的 标记（markup）是关键部分。XML 可以创建内容，然后使用限定标记标记它，从而使每个单词、短语或块成为可识别、可分类的信息。您创建的文件，或文档实例 由元素（标记）和内容构成。</p>
</li>
<li><p>特点</p>
<ul>
<li>必须要有根元素</li>
<li>不能以空格, 数字或者 . 开头, 对大小写敏感</li>
<li>不能交叉嵌套</li>
<li>属性双引号</li>
<li>特殊符号要使用尸体</li>
<li>注释和 HTML 一样</li>
</ul>
</li>
<li><p>XML 虽然可以<strong>描述</strong>和<strong>传输</strong>复杂数据, 但是其解析过于复杂并且体积较大, 所以实际开发使用较少</p>
</li>
<li>格式</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;root&gt;</span><br><span class="line">&lt;arrayList&gt;</span><br><span class="line">    &lt;array&gt;</span><br><span class="line">        &lt;src&gt;images/banner.jpg&lt;/src&gt;</span><br><span class="line">        &lt;newPirce&gt;12.00&lt;/newPirce&gt;</span><br><span class="line">        &lt;oldPrice&gt;30.00&lt;/oldPrice&gt;</span><br><span class="line">    &lt;/array&gt;</span><br><span class="line">    &lt;array&gt;</span><br><span class="line">        &lt;src&gt;images/banner.jpg&lt;/src&gt;</span><br><span class="line">        &lt;newPirce&gt;12.00&lt;/newPirce&gt;</span><br><span class="line">        &lt;oldPrice&gt;30.00&lt;/oldPrice&gt;</span><br><span class="line">    &lt;/array&gt;</span><br><span class="line">&lt;/arrayList&gt;</span><br><span class="line">&lt;/root&gt;</span><br></pre></td></tr></table></figure>
<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><p>JavaScript Object Notation，另一种轻量级的文本数据交换格式，独立于语言。</p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><pre><code>1. 数据在键值对中
2. 数据由 &quot; , &quot; 分隔, 最后一个键值不能带 &quot; , &quot;
3. &quot; [] &quot;保存数组, &quot; {} &quot; 保存对象
4. 使用 &quot;&quot; 双引号包裹键值
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;&quot;src&quot;:&quot;images/detail01.jpg&quot;,&quot;oldPrice&quot;:&quot;10.12&quot;,&quot;newPrice&quot;:&quot;130.00&quot;&#125;,</span><br><span class="line">    &#123;&quot;src&quot;:&quot;images/detail02.jpg&quot;,&quot;oldPrice&quot;:&quot;1.00&quot;,&quot;newPrice&quot;:&quot;11.00&quot;&#125;,</span><br><span class="line">    &#123;&quot;src&quot;:&quot;images/detail03.jpg&quot;,&quot;oldPrice&quot;:&quot;100.00&quot;,&quot;newPrice&quot;:&quot;1000.00&quot;&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="不同语言下的解析-JSON"><a href="#不同语言下的解析-JSON" class="headerlink" title="不同语言下的解析 JSON"></a>不同语言下的解析 JSON</h2><p>JSON数据在不同语言进行传输时，类型为字符串，不同的语言各自也都对应有解析方法，需要解析完成后才能读取</p>
<ol>
<li>php 方法</li>
</ol>
<ul>
<li>json_encode() : 将 php 数组转化为 json 字符</li>
<li>json_decode() : 将 json 字符串 转换为 php 数组<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    header(&apos;Content-Type:text/html;charset=utf-8&apos;);</span><br><span class="line">    /*以json格式传输数据的时候要求响应内容格式是   application/json*/</span><br><span class="line">    /*注意也可以不设置  但是这遵循的一个规范*/</span><br><span class="line"></span><br><span class="line">    /*file_get_contents 获取文件内容*/</span><br><span class="line">    $json = file_get_contents(&apos;01.json&apos;);</span><br><span class="line"></span><br><span class="line">    /*输出json内容*/</span><br><span class="line">    echo $json;</span><br><span class="line">    echo &apos;&lt;br&gt;&lt;br&gt;&apos;;</span><br><span class="line"></span><br><span class="line">    $array = array(</span><br><span class="line">        array(&apos;src&apos;=&gt;&apos;images/detail01.jpg&apos;,&apos;newPrice&apos;=&gt;&apos;12.00&apos;,&apos;oldPrice&apos;=&gt;&apos;455.00&apos;),</span><br><span class="line">        array(&apos;src&apos;=&gt;&apos;images/detail02.jpg&apos;,&apos;newPrice&apos;=&gt;&apos;65.00&apos;,&apos;oldPrice&apos;=&gt;&apos;878.00&apos;),</span><br><span class="line">        array( &apos;src&apos;=&gt;&apos;images/detail01.jpg&apos;,&apos;newPrice&apos;=&gt;&apos;100.00&apos;,&apos;oldPrice&apos;=&gt;&apos;1000.00&apos;)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    /*将php数组转化成json字符*/</span><br><span class="line">    $json_array = json_encode($array);</span><br><span class="line">    echo $json_array;</span><br><span class="line">    echo &apos;&lt;br&gt;&lt;br&gt;&apos;;</span><br><span class="line"></span><br><span class="line">    /*将json字符转化成php数组*/</span><br><span class="line">    $array_json = json_decode($json_array);</span><br><span class="line">    echo $array_json;</span><br><span class="line">    echo &apos;&lt;br&gt;&lt;br&gt;&apos;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="javascript-解析方法"><a href="#javascript-解析方法" class="headerlink" title="javascript 解析方法"></a>javascript 解析方法</h2><ul>
<li>JSON对象<ul>
<li>JSON.parse() : 字符串 转 JSON 对象</li>
<li>JSON.stringify() : JSON 对象 转 字符串</li>
</ul>
</li>
<li>JSON 兼容处理 : json2.js</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var xhr = new XMLHttpRequest;</span><br><span class="line">xhr.open(&apos;get&apos;,&apos;01.php&apos;);</span><br><span class="line">xhr.send(null);</span><br><span class="line">xhr.onreadystatechange = function()&#123;</span><br><span class="line">   if(xhr.status == 200 &amp;&amp; xhr.readyState == 4)&#123;</span><br><span class="line">       /*获取仅仅是字符串*/</span><br><span class="line">       var text = xhr.responseText;</span><br><span class="line"></span><br><span class="line">       /*需要把字符串转化成JSON对象*/</span><br><span class="line">       var json_obj = JSON.parse(text);</span><br><span class="line">       console.log(json_obj);</span><br><span class="line"></span><br><span class="line">       /*我们也可以把JSON对象转化成字符串*/</span><br><span class="line">       var json_str = JSON.stringify(json_obj);</span><br><span class="line">       console.log(json_str);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="封装-Ajax-工具函数"><a href="#封装-Ajax-工具函数" class="headerlink" title="封装 Ajax 工具函数"></a>封装 Ajax 工具函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* 1. 请求的类型                type    get post</span><br><span class="line">* 2. 请求地址                  url</span><br><span class="line">* 3. 是异步的还是同步的         async   false true</span><br><span class="line">* 4. 请求内容的格式            contentType</span><br><span class="line">* 5. 传输的数据                data    json对象</span><br><span class="line">*</span><br><span class="line">* 6.响应成功处理函数           success   function</span><br><span class="line">* 7.响应失败的处理函数         error     function</span><br><span class="line">*</span><br><span class="line">* 这些都是动态参数  参数对象  options</span><br><span class="line">* */</span><br><span class="line"></span><br><span class="line">/*封装一个函数*/</span><br><span class="line">window.$ = &#123;&#125;;</span><br><span class="line">/*申明一个ajax的方法*/</span><br><span class="line">$.ajax = function(options)&#123;</span><br><span class="line"></span><br><span class="line">if(!options || typeof options != &apos;object&apos;)&#123;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*请求的类型*/</span><br><span class="line">var type = options.type || &apos;get&apos;;/*默认get*/</span><br><span class="line">/*请求地址 */</span><br><span class="line">var url = options.url || location.pathname;/*当前的地址*/</span><br><span class="line">/*是异步的还是同步的 */</span><br><span class="line">var async = (options.async === false)?false:true;/*默认异步*/</span><br><span class="line">/*请求内容的格式 */</span><br><span class="line">var contentType = options.contentType || &quot;text/html&quot;;</span><br><span class="line"></span><br><span class="line">/*传输的数据 */</span><br><span class="line">var data = options.data || &#123;&#125;;/*｛name:&apos;&apos;,age:&apos;&apos;｝*/</span><br><span class="line">/*在提交的时候需要转成 name=xjj 这种格式*/</span><br><span class="line"></span><br><span class="line">var dataStr = &apos;&apos;/*数据字符串*/</span><br><span class="line"></span><br><span class="line">for(var key in data)&#123;</span><br><span class="line">    dataStr += key+&apos;=&apos;+data[key]+&apos;&amp;&apos;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dataStr = dataStr &amp;&amp; dataStr.slice(0,-1);</span><br><span class="line"></span><br><span class="line">/*ajax 编程*/</span><br><span class="line">var xhr = new XMLHttpRequest();</span><br><span class="line"></span><br><span class="line">/*请求行*/</span><br><span class="line">/*(type==&apos;get&apos;?url+&apos;?&apos;+dataStr:url)判断当前的请求类型*/</span><br><span class="line">xhr.open(type,(type==&apos;get&apos;?url+&apos;?&apos;+dataStr:url),async);</span><br><span class="line"></span><br><span class="line">/*请求头*/</span><br><span class="line">if(type == &apos;post&apos;)&#123;</span><br><span class="line">    xhr.setRequestHeader(&apos;Content-Type&apos;,&apos;application/x-www-form-urlencoded&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*请求主体*/</span><br><span class="line">/*需要判断请求类型*/</span><br><span class="line">xhr.send(type==&apos;get&apos;?null:dataStr);</span><br><span class="line"></span><br><span class="line">/*监听响应状态的改变  响应状态*/</span><br><span class="line">xhr.onreadystatechange = function()&#123;</span><br><span class="line">    /*请求响应完成并且成功*/</span><br><span class="line">    if(xhr.readyState == 4 &amp;&amp; xhr.status == 200)&#123;</span><br><span class="line">        /*success*/</span><br><span class="line">        var data = &apos;&apos;;</span><br><span class="line">        var contentType = xhr.getResponseHeader(&apos;Content-Type&apos;);</span><br><span class="line">        /*如果我们服务器返回的是xml*/</span><br><span class="line">        if(contentType.indexOf(&apos;xml&apos;) &gt; -1)&#123;</span><br><span class="line">            data = xhr.responseXML;</span><br><span class="line">        &#125;</span><br><span class="line">        /*如果我们的服务器返回的是json字符串*/</span><br><span class="line">        else if(contentType.indexOf(&apos;json&apos;) &gt; -1)&#123;</span><br><span class="line">            /*转化json对象*/</span><br><span class="line">            data = JSON.parse(xhr.responseText);</span><br><span class="line">        &#125;</span><br><span class="line">        /*否则的话他就是字符串*/</span><br><span class="line">        else&#123;</span><br><span class="line">            data = xhr.responseText;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /*回调 成功处理函数*/</span><br><span class="line"></span><br><span class="line">        options.success &amp;&amp; options.success(data);</span><br><span class="line">    &#125;</span><br><span class="line">    /*计时请求xhr.status不成功  他也需要的响应完成才认作是一个错误的请求*/</span><br><span class="line">    else if(xhr.readyState == 4)&#123;</span><br><span class="line">        /*error*/</span><br><span class="line">        options.error &amp;&amp; options.error(&apos;you request fail !&apos;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">$.post = function(options)&#123;</span><br><span class="line">options.type = &apos;post&apos;;</span><br><span class="line">$.ajax(options);</span><br><span class="line">&#125;</span><br><span class="line">$.get = function(options)&#123;</span><br><span class="line">options.type = &apos;get&apos;;</span><br><span class="line">$.ajax(options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="jQuery-中的-Ajax"><a href="#jQuery-中的-Ajax" class="headerlink" title="jQuery 中的 Ajax"></a>jQuery 中的 Ajax</h1><ul>
<li>jQuery为我们提供了更强大的Ajax封装</li>
<li>$.ajax({}) 可配置方式发起Ajax请求</li>
<li>$.get() 以GET方式发起Ajax请求</li>
<li>$.post() 以POST方式发起Ajax请求</li>
<li>$(‘form’).serialize() 序列化表单（即格式化key=val&amp;key=val）</li>
<li>url 接口地址</li>
<li>type 请求方式</li>
<li>timeout 请求超时</li>
<li>dataType 服务器返回格式</li>
<li>data 发送请求数据</li>
<li>beforeSend: function () {} 请求发起前调用</li>
<li>success 成功响应后调用</li>
<li>error 错误响应时调用</li>
<li>complete 响应完成时调用（包括成功和失败）</li>
<li>jQuery Ajax介绍</li>
<li><a href="http://www.w3school.com.cn/jquery/jquery_ref_ajax.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/jquery/jquery_ref_ajax.asp</a></li>
</ul>
<h2 id="jQuery-中-Ajax-的使用"><a href="#jQuery-中-Ajax-的使用" class="headerlink" title="jQuery 中 Ajax 的使用"></a>jQuery 中 Ajax 的使用</h2><ol>
<li>url: 要求为String类型的参数，（默认为当前页地址）发送请求的地址。</li>
<li>type: 要求为String类型的参数，请求方式（post或get）默认为get。注意其他http请求方法，例如put和delete也可以使用，但仅部分浏览器支持。</li>
<li>timeout: 要求为Number类型的参数，设置请求超时时间（毫秒）。此设置将覆盖$.ajaxSetup()方法的全局设置。</li>
<li>async：要求为Boolean类型的参数，默认设置为true，所有请求均为异步请求。如果需要发送同步请求，请将此选项设置为false。注意，同步请求将锁住浏览器，用户其他操作必须等待请求完成才可以执行。</li>
<li>cache：要求为Boolean类型的参数，默认为true（当dataType为script时，默认为false）。设置为false将不会从浏览器缓存中加载请求信息。</li>
<li>data: 要求为Object或String类型的参数，发送到服务器的数据。如果已经不是字符串，将自动转换为字符串格式。get请求中将附加在url后。防止这种自动转换，可以查看processData选项。对象必须为key/value格式，例如<code>{foo1:&quot;bar1&quot;,foo2:&quot;bar2&quot;}</code>转换为<code>&amp;foo1=bar1&amp;foo2=bar2</code>。如果是数组，JQuery将自动为不同值对应同一个名称。例如{foo:[“bar1”,”bar2”]}转换为&amp;foo=bar1&amp;foo=bar2。</li>
<li>dataType: 要求为String类型的参数，预期服务器返回的数据类型。如果不指定，JQuery将自动根据http包mime信息返回responseXML或responseText，并作为回调函数参数传递。<ul>
<li>可用的类型如下：<ul>
<li>xml：返回XML文档，可用JQuery处理。</li>
<li>html：返回纯文本HTML信息；包含的script标签会在插入DOM时执行。</li>
<li>script：返回纯文本JavaScript代码。不会自动缓存结果。除非设置了cache参数。注意在远程请求时（不在同一个域下），所有post请求都将转为get请求。</li>
<li>json：返回JSON数据。</li>
<li>jsonp：JSONP格式。使用SONP形式调用函数时，例如myurl?callback=?，JQuery将自动替换后一个“?”为正确的函数名，以执行回调函数。</li>
<li>text：返回纯文本字符串。</li>
</ul>
</li>
</ul>
</li>
<li><p>beforeSend：要求为Function类型的参数，发送请求前可以修改XMLHttpRequest对象的函数，例如添加自定义HTTP头。在beforeSend中如果返回false可以取消本次ajax请求。XMLHttpRequest对象是惟一的参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function(XMLHttpRequest)&#123;</span><br><span class="line">   this;   //调用本次ajax请求时传递的options参数</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>complete：要求为Function类型的参数，请求完成后调用的回调函数（请求成功或失败时均调用）。</p>
<ul>
<li>参数：XMLHttpRequest对象和一个描述成功请求类型的字符串。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function(XMLHttpRequest, textStatus)&#123;</span><br><span class="line">   this;    //调用本次ajax请求时传递的options参数</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>success：要求为Function类型的参数，请求成功后调用的回调函数，有两个参数。</p>
<ol>
<li>由服务器返回，并根据dataType参数进行处理后的数据。</li>
<li>描述状态的字符串。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function(data, textStatus)&#123;</span><br><span class="line">   //data可能是xmlDoc、jsonObj、html、text等等</span><br><span class="line">   this;  //调用本次ajax请求时传递的options参数</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>error：要求为Function类型的参数，请求失败时被调用的函数。该函数有3个参数，即XMLHttpRequest对象、错误信息、捕获的错误对象(可选)。<br> ajax事件函数如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function(XMLHttpRequest, textStatus, errorThrown)&#123;</span><br><span class="line">   //通常情况下textStatus和errorThrown只有其中一个包含信息</span><br><span class="line">   this;   //调用本次ajax请求时传递的options参数</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>contentType：要求为String类型的参数，当发送信息至服务器时，内容编码类型默认为”application/x-www-form-urlencoded”。该默认值适合大多数应用场合。</p>
</li>
<li>dataFilter：要求为Function类型的参数，给Ajax返回的原始数据进行预处理的函数。提供data和type两个参数。data是Ajax返回的原始数据，type是调用jQuery.ajax时提供的dataType参数。函数返回的值将由jQuery进一步处理。<br>   `function(data, type){<pre><code>//返回处理后的数据
return data;
</code></pre>   }`</li>
<li>global：要求为Boolean类型的参数，默认为true。表示是否触发全局ajax事件。设置为false将不会触发全局ajax事件，ajaxStart或ajaxStop可用于控制各种ajax事件。</li>
<li>ifModified：要求为Boolean类型的参数，默认为false。仅在服务器数据改变时获取新数据。服务器数据改变判断的依据是Last-Modified头信息。默认值是false，即忽略头信息。</li>
<li>jsonp：要求为String类型的参数，在一个jsonp请求中重写回调函数的名字。该值用来替代在”callback=?”这种GET或POST请求中URL参数里的”callback”部分，例如<code>{jsonp:&#39;onJsonPLoad&#39;}</code>会导致将<code>&quot;onJsonPLoad=?&quot;</code>传给服务器。</li>
<li>username：要求为String类型的参数，用于响应HTTP访问认证请求的用户名。</li>
<li>password：要求为String类型的参数，用于响应HTTP访问认证请求的密码。</li>
<li>processData：要求为Boolean类型的参数，默认为true。默认情况下，发送的数据将被转换为对象（从技术角度来讲并非字符串）以配合默认内容类型”application/x-www-form-urlencoded”。如果要发送DOM树信息或者其他不希望转换的信息，请设置为false。</li>
<li>scriptCharset：要求为String类型的参数，只有当请求时dataType为”jsonp”或者”script”，并且type是GET时才会用于强制修改字符集(charset)。通常在本地和远程的内容编码不同时使用。</li>
</ol>
<p>案例代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$(function()&#123;</span><br><span class="line">    $(&apos;#send&apos;).click(function()&#123;</span><br><span class="line">         $.ajax(&#123;</span><br><span class="line">             type: &quot;GET&quot;,</span><br><span class="line">             url: &quot;test.json&quot;,</span><br><span class="line">             data: &#123;</span><br><span class="line">               username:$(&quot;#username&quot;).val(), content:$(&quot;#content&quot;).val()</span><br><span class="line">               &#125;,</span><br><span class="line">             dataType: &quot;json&quot;,</span><br><span class="line">             success: function(data)&#123;</span><br><span class="line">                         $(&apos;#resText&apos;).empty();   //清空resText里面的所有内容</span><br><span class="line">                         var html = &apos;&apos;;</span><br><span class="line">                         $.each(data, function(commentIndex, comment)&#123;</span><br><span class="line">                               html += &apos;&lt;div class=&quot;comment&quot;&gt;&lt;h6&gt;&apos; + comment[&apos;username&apos;]</span><br><span class="line">                                         + &apos;:&lt;/h6&gt;&lt;p class=&quot;para&quot;&apos; + comment[&apos;content&apos;]</span><br><span class="line">                                         + &apos;&lt;/p&gt;&lt;/div&gt;&apos;;</span><br><span class="line">                         &#125;);</span><br><span class="line">                         $(&apos;#resText&apos;).html(html);</span><br><span class="line">                      &#125;</span><br><span class="line">         &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h1 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h1><h2 id="artTemplate-简洁语法模板"><a href="#artTemplate-简洁语法模板" class="headerlink" title="artTemplate 简洁语法模板"></a>artTemplate 简洁语法模板</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 简洁语法</span><br><span class="line">&#123;&#123;if admin&#125;&#125;</span><br><span class="line">    &#123;&#123;include &apos;admin_content&apos;&#125;&#125;</span><br><span class="line"></span><br><span class="line">    &#123;&#123;each list&#125;&#125;</span><br><span class="line">        &lt;div&gt;&#123;&#123;$index&#125;&#125;. &#123;&#123;$value.user&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &#123;&#123;/each&#125;&#125;</span><br><span class="line">&#123;&#123;/if&#125;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 编写模板</span><br><span class="line">&lt;script id=&quot;test&quot; type=&quot;text/html&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &#123;&#123;each list as value i&#125;&#125;</span><br><span class="line">            &lt;li&gt;索引 &#123;&#123;i + 1&#125;&#125; ：&#123;&#123;value&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &#123;&#123;/each&#125;&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 渲染数据</span><br><span class="line">var data = &#123;</span><br><span class="line">    title: &apos;标签&apos;,</span><br><span class="line">    list: [&apos;文艺&apos;, &apos;博客&apos;, &apos;摄影&apos;, &apos;电影&apos;, &apos;民谣&apos;, &apos;旅行&apos;, &apos;吉他&apos;]</span><br><span class="line">&#125;;</span><br><span class="line">var html = template(&apos;test&apos;, data);</span><br><span class="line">document.getElementById(&apos;content&apos;).innerHTML = html;</span><br></pre></td></tr></table></figure>
<h2 id="artTemplate-js-原生语法模板"><a href="#artTemplate-js-原生语法模板" class="headerlink" title="artTemplate js 原生语法模板"></a>artTemplate js 原生语法模板</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 模板 js 原生语法</span><br><span class="line">&lt;h1&gt;&lt;%=title%&gt;&lt;/h1&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;%for(i = 0; i &lt; list.length; i ++) &#123;%&gt;</span><br><span class="line">    &lt;li&gt;条目内容 &lt;%=i + 1%&gt; ：&lt;%=list[i]%&gt;&lt;/li&gt;</span><br><span class="line">&lt;%&#125;%&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;% 与 %&gt; 符号包裹起来的语句则为模板的逻辑表达式。</span><br><span class="line">对内容编码输出：&lt;%=content%&gt;</span><br><span class="line">不编码输出：&lt;%=#content%&gt;</span><br></pre></td></tr></table></figure>
<h1 id="同源跨域"><a href="#同源跨域" class="headerlink" title="同源跨域"></a>同源跨域</h1><ol>
<li>同源<ol start="2">
<li>同源策略是浏览器的一种安全策略，所谓同源是指，域名，协议，端口完全相同。</li>
</ol>
</li>
<li>跨域<ol start="3">
<li><a href="http://api.example.com/detail.html" target="_blank" rel="noopener">http://api.example.com/detail.html</a>  不同源 域名不同</li>
<li>https//<a href="http://www.example.com/detail.html" target="_blank" rel="noopener">www.example.com/detail.html</a>   不同源 协议不同</li>
<li><a href="http://www.example.com:8080/detail.html" target="_blank" rel="noopener">http://www.example.com:8080/detail.html</a>    不同源    端口不同</li>
<li><a href="http://api.example.com:8080/detail.html" target="_blank" rel="noopener">http://api.example.com:8080/detail.html</a>    不同源    域名、端口不同</li>
<li><a href="https://api.example.com/detail.html" target="_blank" rel="noopener">https://api.example.com/detail.html</a>    不同源    协议、域名不同</li>
<li><a href="https://www.example.com:8080/detail.html" target="_blank" rel="noopener">https://www.example.com:8080/detail.html</a>    不同源    端口、协议不同</li>
<li><a href="http://www.example.com/detail/index.html" target="_blank" rel="noopener">http://www.example.com/detail/index.html</a>    同源    只是目录不同</li>
</ol>
</li>
<li>跨域方案<ol>
<li>顶级域名相同的可以通过domain.name来解决，即同时设置 domain.name = 顶级域名（如example.com）</li>
<li>document.domain + iframe</li>
<li>window.name + iframe</li>
<li>location.hash + iframe</li>
<li>window.postMessage()</li>
</ol>
</li>
<li>jsonp<ol start="5">
<li>json with padding</li>
<li>原理<ol start="7">
<li>其本质是利用了标签具有可跨域的特性， 由服务端返回一个预先定义好的Javascript函数的调用，并且将服务器数据以该函数参数的形式传递过来， 此方法需要前后端配合完成。</li>
</ol>
</li>
</ol>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">当我们用script标签去加载的时候  会把内容解析成js去执行</span><br><span class="line">--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function fuc(data)&#123;</span><br><span class="line">        console.log(data.name);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;http://www.guangzhou.com/api.php?callback=fuc&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/04/18/JS的值类型和引用类型/" rel="next" title="JS面向对象之特性已经值类型与复合类型">
                <i class="fa fa-chevron-left"></i> JS面向对象之特性已经值类型与复合类型
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/01/JS面向对象之作用域/" rel="prev" title="JS面向对象之作用域">
                JS面向对象之作用域 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Liu Yu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Ajax"><span class="nav-number">1.</span> <span class="nav-text">Ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax-是什么"><span class="nav-number">1.1.</span> <span class="nav-text">Ajax 是什么</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#原生-Ajax-的使用"><span class="nav-number">2.</span> <span class="nav-text">原生 Ajax 的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#XMLHttpRequest"><span class="nav-number">2.1.</span> <span class="nav-text">XMLHttpRequest</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#请求-Request"><span class="nav-number">2.2.</span> <span class="nav-text">请求 Request</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#响应-Response"><span class="nav-number">2.3.</span> <span class="nav-text">响应 Response</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#步骤分析"><span class="nav-number">2.4.</span> <span class="nav-text">步骤分析</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其他注意点"><span class="nav-number">3.</span> <span class="nav-text">其他注意点</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#API-详解"><span class="nav-number">4.</span> <span class="nav-text">API 详解</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#get-和-post-的差异"><span class="nav-number">5.</span> <span class="nav-text">get 和 post 的差异</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#get-方式的-请求响应"><span class="nav-number">5.1.</span> <span class="nav-text">get 方式的 请求响应</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#post-请求和响应"><span class="nav-number">5.2.</span> <span class="nav-text">post 请求和响应</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#XML"><span class="nav-number">6.</span> <span class="nav-text">XML</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSON"><span class="nav-number">7.</span> <span class="nav-text">JSON</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#特点"><span class="nav-number">7.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#不同语言下的解析-JSON"><span class="nav-number">7.2.</span> <span class="nav-text">不同语言下的解析 JSON</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#javascript-解析方法"><span class="nav-number">7.3.</span> <span class="nav-text">javascript 解析方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#封装-Ajax-工具函数"><span class="nav-number">8.</span> <span class="nav-text">封装 Ajax 工具函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jQuery-中的-Ajax"><span class="nav-number">9.</span> <span class="nav-text">jQuery 中的 Ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#jQuery-中-Ajax-的使用"><span class="nav-number">9.1.</span> <span class="nav-text">jQuery 中 Ajax 的使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#模板引擎"><span class="nav-number">10.</span> <span class="nav-text">模板引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#artTemplate-简洁语法模板"><span class="nav-number">10.1.</span> <span class="nav-text">artTemplate 简洁语法模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#artTemplate-js-原生语法模板"><span class="nav-number">10.2.</span> <span class="nav-text">artTemplate js 原生语法模板</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#同源跨域"><span class="nav-number">11.</span> <span class="nav-text">同源跨域</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Yu</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.1.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
